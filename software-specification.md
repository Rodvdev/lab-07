# Software Specification

## 1. Overview

This document defines the functional and technical specifications for a Python Flask web application that consumes the ExchangeRates API and retrieves a catalog of vehicles stored in AWS Aurora PostgreSQL. The application will be deployed serverlessly on AWS Lambda via API Gateway.

---

## 2. Objectives

* Provide a responsive web interface with a home page and two feature views.
* Display real‑time currency exchange information (USD, EUR, PEN) using ExchangeRates API.
* Display a catalog of vehicles stored in Aurora PostgreSQL.
* Deploy the application into AWS Lambda and expose access through API Gateway.
* Document the deployment steps clearly in README.md.

---

## 3. Scope

### In‑Scope

* Flask application with Tailwind CSS UI
* Two data views: currency exchange & vehicles catalog
* Secure connection to Aurora PostgreSQL
* Deployment on AWS Lambda via Zappa
* Application logging via standard Python logging
* Environment variable configuration

### Out‑of‑Scope

* Admin panel for CRUD vehicles
* Authentication/authorization features
* CI/CD automation

---

## 4. Architecture

```
Client Browser
     |
     |  Flask (HTML templates, Tailwind)
     |
API Gateway
     |
AWS Lambda  (Python Flask via Zappa)
     |
Aurora Serverless PostgreSQL  
     |
ExchangeRates API (External Service)
```

---

## 5. Use Cases

### UC‑01: View exchange rates

| Actor | User |
| Action | Accesses `/exchange` |
| Result | Sees currency values for USD, EUR, PEN |

### UC‑02: View vehicle catalog

| Actor | User |
| Action | Accesses `/vehicles` |
| Result | Sees table of vehicles with brand, model, year, price |

---

## 6. Functional Requirements

| ID    | Description                                                          |
| ----- | -------------------------------------------------------------------- |
| FR‑01 | System shall display a home page with links to exchange and vehicles |
| FR‑02 | System shall call ExchangeRates API and show USD, EUR, PEN values    |
| FR‑03 | System shall query Aurora PostgreSQL to retrieve vehicle list        |
| FR‑04 | System shall display vehicles in tabular UI                          |
| FR‑05 | System shall run on AWS Lambda                                       |

---

## 7. Non‑Functional Requirements

| Category     | Requirement                                                     |
| ------------ | --------------------------------------------------------------- |
| Performance  | Response < 2s under normal load                                 |
| Availability | 99% hosted serverlessly                                         |
| Security     | DB credentials stored in AWS Secrets Manager or Lambda env vars |
| Portability  | Deployment via ZIP/Zappa update                                 |
| Cost         | Aurora Serverless v2 auto‑scaling                               |
| UX           | Tailwind responsive layout                                      |

---

## 8. Data Model

### Vehicle Table

| Field        | Type               |
| ------------ | ------------------ |
| id           | SERIAL PRIMARY KEY |
| brand        | VARCHAR(50)        |
| model        | VARCHAR(50)        |
| year         | INT                |
| price        | DECIMAL            |
| availability | BOOLEAN DEFAULT FALSE |

---

## 9. External Integrations

### ExchangeRates API

Endpoint:

```
GET https://api.apilayer.com/exchangerates_data/latest?base=USD&symbols=USD,EUR,PEN
```

Header:

```
apikey: <API_KEY_EXCHANGE>
```

---

## 10. Environment Variables

```
API_KEY_EXCHANGE=
DB_HOST=
DB_NAME=
DB_USER=
DB_PASS=
```

---

## 11. Deployment Plan (Lambda)

1. Install Zappa into project environment
2. Run `zappa init` to generate configuration
3. Deploy function: `zappa deploy production`
4. Update Lambda package: `zappa update production`
5. Verify public URL generated by API Gateway
6. Verify deployment via API Gateway URL

---

## 12. Required AWS Resources

* AWS Lambda
* API Gateway HTTP API
* Aurora PostgreSQL Serverless v2
* (Optional) AWS Secrets Manager

---

## 13. Risks & Mitigations

| Risk                  | Mitigation                                 |
| --------------------- | ------------------------------------------ |
| DB connection timeout | Use Aurora Serverless and proper pooling   |
| API Key exposure      | Use environment vars / Secrets Manager     |
| Cold start latency    | Enable provisioned concurrency if required |

---

## 14. Success Criteria

* App deployed in Lambda and accessible publicly
* Currency exchange view displays real‑time values
* Vehicle catalog loads data from Aurora
* README contains full deployment instructions

---

## 15. Future Enhancements

* Authentication and RBAC
* CRUD for vehicles
* React frontend + Cognito auth
* CI/CD with GitHub Actions

---

## 16. Approval

**Owner:** Rodrigo Vásquez de Velasco
**Version:** 1.0
**Status:** Draft Complete
